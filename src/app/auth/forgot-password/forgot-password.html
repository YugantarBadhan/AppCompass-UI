<div class="forgot-password-container">
  <div class="forgot-password-card">
    <div class="header">
      <div class="app-logo">
        <span class="logo-icon">✦</span>
        <span class="app-name">AppCompass</span>
      </div>
      <h2 class="title">Reset Password</h2>
    </div>

    <form [formGroup]="forgotPasswordForm" (ngSubmit)="onResetPassword()" class="form">
      <!-- Success Message -->
      <div *ngIf="successMessage" class="message success-message">
        {{ successMessage }}
      </div>

      <!-- Error Message -->
      <div *ngIf="errorMessage" class="message error-message">
        {{ errorMessage }}
      </div>

      <!-- Username Field -->
      <div class="form-group">
        <input
          type="text"
          id="username"
          formControlName="username"
          placeholder="Username"
          class="form-input"
          [class.error]="forgotPasswordForm.get('username')?.invalid && forgotPasswordForm.get('username')?.touched"
        />
        <div *ngIf="forgotPasswordForm.get('username')?.invalid && forgotPasswordForm.get('username')?.touched" 
             class="error-text">
          Username is required
        </div>
      </div>

      <!-- New Password Field -->
      <div class="form-group">
        <input
          type="password"
          id="newPassword"
          formControlName="newPassword"
          placeholder="New Password"
          class="form-input"
          [class.error]="forgotPasswordForm.get('newPassword')?.invalid && forgotPasswordForm.get('newPassword')?.touched"
        />
        <div *ngIf="forgotPasswordForm.get('newPassword')?.invalid && forgotPasswordForm.get('newPassword')?.touched" 
             class="error-text">
          <span *ngIf="forgotPasswordForm.get('newPassword')?.errors?.['required']">New password is required</span>
          <span *ngIf="forgotPasswordForm.get('newPassword')?.errors?.['minlength']">Password must be at least 6 characters</span>
        </div>
      </div>

      <!-- Confirm Password Field -->
      <div class="form-group">
        <input
          type="password"
          id="confirmPassword"
          formControlName="confirmPassword"
          placeholder="Confirm New Password"
          class="form-input"
          [class.error]="forgotPasswordForm.get('confirmPassword')?.invalid && forgotPasswordForm.get('confirmPassword')?.touched"
        />
        <div *ngIf="forgotPasswordForm.get('confirmPassword')?.invalid && forgotPasswordForm.get('confirmPassword')?.touched" 
             class="error-text">
          <span *ngIf="forgotPasswordForm.get('confirmPassword')?.errors?.['required']">Please confirm your password</span>
          <span *ngIf="forgotPasswordForm.get('confirmPassword')?.errors?.['passwordMismatch']">Passwords do not match</span>
        </div>
      </div>

      <!-- Reset Button -->
      <button
        type="submit"
        class="reset-btn"
        [disabled]="isResetDisabled"
        [class.loading]="isLoading"
      >
        <span *ngIf="!isLoading">Reset Password</span>
        <span *ngIf="isLoading" class="loading-spinner">Resetting...</span>
      </button>

      <!-- Back to Login -->
      <div class="back-to-login">
        <button type="button" class="back-btn" (click)="onBackToLogin()">
          ← Back to Login
        </button>
      </div>
    </form>
  </div>
</div>